"use strict";const e=require("vue"),x=require("../../node_modules/.pnpm/vue-draggable-plus@0.5.4_@types_sortablejs@1.15.8/node_modules/vue-draggable-plus/dist/vue-draggable-plus.js"),_=require("../../node_modules/.pnpm/@iconify_vue@4.1.2_vue@3.5.12_typescript@5.7.3_/node_modules/@iconify/vue/dist/iconify.js");require("../../packages/custom-components/es/McBlock/index.js");require("../../packages/custom-components/es/McCarousel/index.js");require("../../packages/custom-components/es/McContainer/index.js");require("../../packages/custom-components/es/McCube/index.js");require("../../packages/custom-components/es/McTab/index.js");require("../../packages/custom-components/es/McImage/index.js");require("../../packages/custom-components/es/McNotice/index.js");require("../../packages/custom-components/es/McTitle/index.js");require("../../packages/custom-components/es/Preview/index.js");require("../../packages/custom-components/es/customComponent/index.js");const w=require("../../packages/custom-components/es/config.js"),a=require("../../utils/index.js"),q=require("../../types/platform.js"),c=require("../../custom-schema-template/index.vue2.js"),s=require("../pageConfig/config.js"),V=require("../pageConfig/index.vue.js"),y=require("./ControlNestWidget.vue.js"),u=require("./config.js"),b={class:"flex h-full text-[16px]"},k={class:"w-[236px] bg-white p-5"},N={class:"text-[12px]"},E={class:"flex justify-center flex-1 h-full overflow-auto"},B={class:"w-full"},C={class:"w-[375px] my-[50px] mx-auto bg-white shadow-lg"},S={class:"control-config w-[360px] overflow-y-scroll p-5 bg-white"},F={class:"pb-5 mb-5 font-bold text-[20px] border-b-2"},z=e.defineComponent({__name:"index",setup(D){const i=w.useSchema(),n=e.ref(),f=e.computed(()=>n!=null&&n.value?i.fields[n==null?void 0:n.value.component]:void 0),p=o=>{const{children:l}=o;return{...a.deepClone(o),id:a.randomString(),children:a.deepClone(l)}},g=o=>{n.value=o},d=(o,l=u.widgets.value)=>{let r=l.reduce((t,v,h)=>v.id==o?h:t,-1);r>=0?l.splice(r,1):l.filter(t=>t.children).forEach(t=>{d(o,t.children)}),n.value=void 0},m=()=>{n.value=void 0};return e.provide(q.ControlInject,{initial:i,widgets:e.computed(()=>u.widgets.value),curComponent:e.computed(()=>n.value),setCurComponent:g,deleteComponent:d}),(o,l)=>{var r;return e.openBlock(),e.createElementBlock("div",b,[e.createElementVNode("div",k,[e.createVNode(e.unref(x.VueDraggable),{ref:"draggableRef",modelValue:e.unref(i).initializing,"onUpdate:modelValue":l[0]||(l[0]=t=>e.unref(i).initializing=t),group:{name:"itxst",pull:"clone"},sort:!1,animation:300,clone:p},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(i).initializing,t=>(e.openBlock(),e.createElementBlock("div",{key:t.name,class:"p-3 inline-flex flex-col items-center justify-center gap-1 w-6/12 cursor-pointer hover:bg-blue-600 hover:text-white"},[e.createVNode(e.unref(_.Icon),{style:{"font-size":"26px"},icon:t.icon},null,8,["icon"]),e.createElementVNode("span",N,e.toDisplayString(t.name),1)]))),128))]),_:1},8,["modelValue"])]),e.createElementVNode("div",E,[e.createElementVNode("div",B,[e.createElementVNode("div",C,[e.createVNode(V,{styles:e.unref(s.page).styles,onPageSetting:m},{default:e.withCtx(()=>[e.createVNode(y,{widgets:e.unref(u.widgets),"onUpdate:widgets":l[1]||(l[1]=t=>e.isRef(u.widgets)?u.widgets.value=t:null)},null,8,["widgets"])]),_:1},8,["styles"])])])]),e.createElementVNode("div",S,[e.createElementVNode("div",F,e.toDisplayString(((r=n.value)==null?void 0:r.name)||"页面"),1),n.value?(e.openBlock(),e.createBlock(c,{key:0,modelValue:n.value,"onUpdate:modelValue":l[2]||(l[2]=t=>n.value=t),"shema-field":f.value},null,8,["modelValue","shema-field"])):(e.openBlock(),e.createBlock(c,{key:1,modelValue:e.unref(s.page),"onUpdate:modelValue":l[3]||(l[3]=t=>e.isRef(s.page)?s.page.value=t:null),"shema-field":e.unref(s.pageShemaField)},null,8,["modelValue","shema-field"]))])])}}});module.exports=z;
